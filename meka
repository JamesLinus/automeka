#include <meka.hpp>

namespace meka {

  meka::package yamlcpp = {
    path    = meka::this_dir() / "lib/libcorefungi/lib/yaml-cpp",
    name    = "yaml-cpp",
    version = "1.5.0",

    meka::lib {
      name    = "yaml-cpp",
      sources = { "src/.*\\.cpp" }
    },
  };

  meka::package corefungi = {
    path    = meka::this_dir() / "lib/libcorefungi",
    name    = "libcorefungi",
    version = "0.0.1",

    modules = { meka::yamlcpp },

    meka::lib {
      name    = "corefungi",
      sources = { "src/.*\\.cpp" },
      links   = { "yaml-cpp", "boost_program_options" }
    },
  };

  meka::package self = {
    path    = meka::this_dir(),
    name    = "meka",
    version = "0.0.1",

    modules = { meka::corefungi },

    meka::lib {
      name    = "meka",
      sources = { "src/.*\\.cpp" },
      links   = { "corefungi" }

      // meka::host
    },

    meka::meka,
  };

  void main() {
    // meka::indent(meka::self);
    meka::build(meka::self);

    // meka::test(meka::self);
    // meka::install(meka::self);
    // meka::pack(meka::self);
  }

}

#include <meka/main>
